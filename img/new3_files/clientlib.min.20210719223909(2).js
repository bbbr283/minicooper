define("apps/minidigital/components/introslider/clientlib","jquery core/TrackingAdapter core/Messagebus core/Slider core/utils/viewportspy core/utils/scrollspy".split(" "),function(d,e,f,k,g,l){var h=function(a,b){this.$element=d(a);this._id=this.$element[0].id;this.$target=this.$element.find("[data-slick]");this.COPY='[data-fg-role\x3d"copy"]';this.$logo=this.$element.find(".md-introslider-logo");this.$copywrapper=this.$element.find(".md-introslider-item-copy-wrapper");this.isTrackingActive=(this.trackingObj=
e.getInstance())&&!this.trackingObj.isTrackingDisabled();b&&b.doNotTrack&&(this.isTrackingActive=!1);this.ScrollSpy=l.init();this.scrollTimeout=null;this.embeddedPlayerIds=[];this.trackingEventTemp={};this.$copyTrigger=d("\x3cdiv/\x3e",{"class":"md-copy-trigger",html:'\x3cspan class\x3d"md-icn-angle-up"\x3e\x3c/span\x3e'});this.slickSettings={adaptiveHeight:!1,autoplay:!1,dots:!0,draggable:!0,infinite:!0,pauseOnFocus:!1,pauseOnHover:!0,slidesToShow:1,slidesToScroll:1};b&&b.slickSettings&&d.extend(this.slickSettings,
b.slickSettings);0<this.$target.length&&this.init()};h.prototype={init:function(){this.$target.on("init",this.onSliderInit.bind(this));this.$target.on("beforeChange",this.onSliderBeforeChange.bind(this));this.$target.on("swipe",this.onSliderSwipe.bind(this));this.$target.on("click",'button[role\x3d"button"]',this.onSliderClick.bind(this));this.$target.on("afterChange",this.onSliderAfterChange.bind(this));this.Slider=new k(this.$target,this.slickSettings);this.Slider.slick.setHeight();this.initCopyTrigger();
this.initEvents();this.isTrackingActive&&this.initTracking()},onFeatureCopyClick:function(a){a=d(a.currentTarget);this.toggleCopy(a,"minimized"===a.attr("data-fg-state"))},toggleCopy:function(a,b){a=a||d("");var c=a.children(),e=b?"maximized":"minimized";a.animate({height:b?c.outerHeight():"150px"},400,function(){a.attr("data-fg-state",e);a.find(".md-icn-arrow-up-wide").toggleClass("md-icn-arrow-up-wide md-icn-arrow-down-wide")});b||a.attr("data-fg-state",e)},onSliderInit:function(){f.subscribe({channel:"md:video",
topic:"state:change",callback:this.onVideoStateChange.bind(this)});this.adjustSliderElements()},onSliderBeforeChange:function(a,b,c,d){c!==d&&this.setCopyMinimized(!1)},onSliderSwipe:function(){this.trackingEventTemp.lastEventAction="swipe"},onSliderClick:function(){this.trackingEventTemp.lastEventAction="click";Modernizr.touch&&(this.trackingEventTemp.lastEventAction="tap")},onSliderAfterChange:function(a,b,c){a=this.$target.find(".slick-slide.slick-current");b=a.find(".h1").first().text().trim();
this.isTrackingActive&&void 0===a.data("impressionTracked")&&(f.publish({channel:e.getMessages().channel,topic:e.getMessages().events.TRIGGER_EVENT,data:{element:a[0],callbackFn:this.getSlideImpressionData.bind(this,c,b,this.trackingEventTemp.lastEventAction)}}),a.data("impressionTracked",!0))},setCopyMinimized:function(a){this.$element.toggleClass("copy-wrapper-minimized",a)},setSliderScrolled:function(a){this.$target.toggleClass("slick-scrolled",a)},initEvents:function(){this.viewportSubscription=
f.subscribe({channel:g.messages.channel,topic:g.messages.events.RESIZE,callback:this.onViewportUpdate.bind(this)});g.viewportData.minwidth.tabletPortrait||(this.scrollSubscription=f.subscribe({channel:this.ScrollSpy.messages.channel,topic:this.ScrollSpy.messages.events.SCROLL,callback:this.onScrollUpdate.bind(this)}));this.$copywrapper.each(this.initCopyWrapperEvents.bind(this))},initCopyWrapperEvents:function(a,b){a=d(b);if(150<=a.outerHeight())a.attr("data-fg-state","minimized").on("click",this.onFeatureCopyClick.bind(this))},
onViewportUpdate:function(){this.adjustSliderElements();this.adjustCopyTrigger()},onScrollUpdate:function(a){this.setSliderScrolled(!0);window.clearTimeout(this.scrollTimeout);this.scrollTimeout=window.setTimeout(this.setSliderScrolled.bind(this,!1),100)},adjustSliderElements:function(){var a=9*this.$target.width()/16;this.$target.find(".slick-arrow").css("top",a/2);if(0<this.$logo.length){var b=this.$logo.height(),c=this.$target.find(".copy-wrapper").css("padding-left");g.viewportData.minwidth.tabletPortrait?
(this.$logo.css("top",a-110-b),this.$target.find(".copy-wrapper h2").css("margin-top",0)):(this.$logo.css("top",a-10).css("padding-left",c).css("padding-right",c),this.$target.find(".copy-wrapper h2").css("margin-top",b+20))}},adjustCopyTrigger:function(){var a=9*this.$target.width()/16;this.$copyTrigger.height(this.$target.height()-a)},initCopyTrigger:function(){this.$copyTrigger.on("click",this.onCopyTriggerClick.bind(this));this.$target.after(this.$copyTrigger)},onCopyTriggerClick:function(){var a=
d(this.Slider.slick.$slides[this.Slider.slick.currentSlide]);f.publish({channel:"md:video",topic:"do:pause",data:{container:a}});this.setCopyMinimized(!1);this.$logo.fadeIn()},onVideoStateChange:function(a){a.player&&d.contains(this.$target[0],a.player.a||a.player.container)&&(1===a.state&&(this.setCopyMinimized(!0),this.adjustCopyTrigger()),0===a.state&&this.setCopyMinimized(!1))},initTracking:function(){this.staticDataObj={id:this._id,defaultObj:{eventInfo:{},attributes:{relatedComponentID:this._id,
relatedComponentName:"introslider",relatedComponentPrimaryCategory:"gallery",relatedContentHeadline:this.$element.find("h2").first().text().trim()},category:{primaryCategory:"gallery",subCategory01:"introslider"}},defaultEventObj:{eventInfo:{eventName:"tile view",eventAction:"na",eventPoints:"",cause:"automatic",effect:"tile view"}}};e.register(this.$element[0],this.staticDataObj,this.getComponentImpressionData.bind(this));this.Slider.slick.$slides.each(this.registerSlides.bind(this))},getComponentImpressionData:function(){return{eventInfo:{eventName:"introslider impression",
eventAction:"view",effect:"introslider visible"},category:{primaryCategory:"component impression",subCategory01:""}}},registerSlides:function(a,b){var c=d(b).find(".h1").first().text().trim();e.register(b,this.staticDataObj,this.getSlideImpressionData.bind(this,a,c))},getSlideImpressionData:function(a,b,c){return{eventInfo:{eventAction:c||"na",eventPoints:a+1,cause:"undefined"!==typeof c?"default":"automatic"},attributes:{tileName:b}}}};return h});